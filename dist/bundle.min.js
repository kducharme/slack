/*! slack 2018-05-04 */
!function(){return function e(t,n,a){function s(o,c){if(!n[o]){if(!t[o]){var d="function"==typeof require&&require;if(!c&&d)return d(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var i=n[o]={exports:{}};t[o][0].call(i.exports,function(e){return s(t[o][1][e]||e)},i,i.exports,e,t,n,a)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<a.length;o++)s(a[o]);return s}}()({1:[function(e,t,n){t.exports=(t=>{e("./databaseUpdate")({table:"channel",channelName:"-LBN5_skx51L7hJQp5R1"},{id:t.uid,email:t.email,name:"",img:""})})},{"./databaseUpdate":17}],2:[function(e,t,n){const a=e("./databaseLoad").loadDatabase,s=e("./loginScreen");a(),s()},{"./databaseLoad":15,"./loginScreen":24}],3:[function(e,t,n){t.exports=((e,t,n)=>{const a=document.createElement("button");return a.addEventListener("click",n),a.innerHTML=t,a.classList.add(e),a})},{}],4:[function(e,t,n){t.exports=((e,t,n)=>{const a=document.createElement("button");return a.addEventListener("click",n),a.textContent=t,a.classList.add(e),a})},{}],5:[function(e,t,n){const a=()=>{document.querySelectorAll("#messages").forEach(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})};t.exports=(t=>{const n=e("./channelCheck").setCurrentChannel,s=(e("./channelDetails").channelDetailsLeft,e("./databaseLoad").loadMessages),r=e("./channelDetails").clearChannel,o=document.querySelectorAll(".individual-channel");let c=t.target;c.id||(c=t.path[1]);for(let e=0;e<o.length;e++)o[e].classList.contains("activeChannel")&&o[e].classList.remove("activeChannel");a(),c.classList.add("activeChannel"),r(),n(c),s(c.id)})},{"./channelCheck":6,"./channelDetails":7,"./databaseLoad":15}],6:[function(e,t,n){let a=null;t.exports={getCurrentChannel:()=>a,setCurrentChannel:t=>{const n=e("./channelDetails").channelDetails;a=t,n()}}},{"./channelDetails":7}],7:[function(e,t,n){const a=()=>{const t=(0,e("./channelCheck").getCurrentChannel)(),n=document.createElement("span");n.childList="options__left",n.setAttribute("id","optionsLeft");const a=document.createElement("h2");a.classList="options__channel",a.innerHTML=`#${t.childNodes[1].textContent}`,n.appendChild(a);const s=document.createElement("p");return s.textContent=t.getAttribute("data-purpose"),s.classList="options__purpose",n.appendChild(s),n},s=()=>{(0,e("./channelCheck").getCurrentChannel)()};t.exports={channelDetails:()=>{const e=document.querySelector(".options"),t=a();s();e.appendChild(t)},channelDetailsLeft:a,clearChannel:()=>{document.querySelectorAll("#optionsLeft").forEach(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})}}},{"./channelCheck":6}],8:[function(e,t,n){t.exports=(e=>{document.querySelector(`#${e}`).value=""})},{}],9:[function(e,t,n){const a=()=>{document.querySelector("#channelModal").classList="hide"},s=()=>{const e=document.querySelector("#channelList"),t=document.querySelector("#userList");e.innerHTML="",t.innerHTML=""};t.exports={createNewChannel:t=>{e("./clearInputs");const n=e("./databaseCreate"),r=e("./databaseLoad").loadDatabase,o=e("./dateGenerator"),c=document.querySelector("#nameInput"),d=document.querySelector("#purposeInput"),l=o();n({name:c.value,purpose:d.value,dateCreated:l,users:{},messages:{}}),s(),r(),a()},closeCreateNewModal:a}},{"./clearInputs":8,"./databaseCreate":12,"./databaseLoad":15,"./dateGenerator":18}],10:[function(e,t,n){t.exports=(()=>{document.querySelector("#writeMessage")})},{}],11:[function(e,t,n){t.exports={addMessageToChannel:e=>{$.ajax({url:`https://slack-kd.firebaseio.com/channel/${e.channel}/messages/.json`,type:"POST",data:JSON.stringify(e),success:function(){},error:function(e){console.table("error: "+e)}})},addMessage:t=>{e("./realtimeAddMessages");$.ajax({url:"https://slack-kd.firebaseio.com/messages/.json",type:"POST",data:JSON.stringify(t),success:function(){},error:function(e){console.table("error: "+e)}})}}},{"./realtimeAddMessages":31}],12:[function(e,t,n){t.exports=(e=>{$.ajax({url:"https://slack-kd.firebaseio.com/channel.json",type:"POST",data:JSON.stringify(e),success:function(){console.log("success")},error:function(e){console.log("error: "+e)}})})},{}],13:[function(e,t,n){},{}],14:[function(e,t,n){},{}],15:[function(e,t,n){t.exports={loadDatabase:()=>{const t=e("./databaseParse").databaseParse;$.ajax({url:"https://slack-kd.firebaseio.com/channel.json?print=pretty",type:"GET",success:function(e){t(e)},error:function(e){console.table(e)}})},loadMessages:t=>{const n=e("./databaseParse").messageParse;e("./changeChannel");$.ajax({url:`https://slack-kd.firebaseio.com/channel/${t}/messages.json?print=pretty`,type:"GET",success:function(e){n(e)},error:function(e){console.table(e)}})}}},{"./changeChannel":5,"./databaseParse":16}],16:[function(e,t,n){t.exports={databaseParse:t=>{e("./databaseLoad").loadDatabase;const n=e("./sidebarChannels"),a=(e("./sidebarChannels"),[]);return Object.keys(t).forEach(e=>{let n={key:e,name:t[e].name,purpose:t[e].purpose,date:t[e].date,messages:t[e].messages,users:t[e].users};a.push(n)}),n(a),a},messageParse:t=>{e("./databaseLoad").loadDatabase,e("./sidebarChannels");const n=e("./postSavedMessages"),a=[];return Object.keys(t).forEach(e=>{let n={key:e,user:t[e].user,date:t[e].date,text:t[e].text,media:t[e].media};a.push(n)}),n(a),a}}},{"./databaseLoad":15,"./postSavedMessages":30,"./sidebarChannels":32}],17:[function(e,t,n){t.exports=((e,t)=>{$.ajax({url:`https://slack-kd.firebaseio.com/${e.table}/${e.channelName}/users/${t.id}.json`,type:"PATCH",data:JSON.stringify(t),success:function(){},error:function(e){console.table("error: "+e)}})})},{}],18:[function(e,t,n){t.exports=(()=>{const e=new Date,t=e.getDate();return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${t}, ${e.getFullYear()}`})},{}],19:[function(e,t,n){t.exports=(()=>{console.log("oh hey there. this feature isn't ready yet")})},{}],20:[function(e,t,n){t.exports=((e,t,n,a)=>{const s=document.createElement("input");return s.setAttribute("type",e),s.setAttribute("id",t),s.classList.add(n),s.placeholder=a,s})},{}],21:[function(e,t,n){t.exports=(e=>{const t=document.createElement("p");return t.classList.add("input__label"),t.textContent=e,t})},{}],22:[function(e,t,n){t.exports=(()=>{document.querySelector("#messages").scrollTop=9999})},{}],23:[function(e,t,n){const a=()=>{const t=e("./channelCheck").setCurrentChannel,n=(e("./channelDetails").channelDetailsLeft,e("./databaseLoad").loadMessages),a=document.querySelector(".sidebar__channels--list").childNodes[0];a.classList.add("activeChannel"),t(a),n(a.id)};window.onload=function(){setTimeout(function(){a()},500)},t.exports=a},{"./channelCheck":6,"./channelDetails":7,"./databaseLoad":15}],24:[function(e,t,n){t.exports=(()=>{const e=document.createElement("span");e.setAttribute("id","loginModal");const t=document.querySelector("body");e.classList.add("login"),e.appendChild(a()),t.appendChild(e)});const a=()=>{const t=document.createElement("span"),n=e("./inputFactory"),a=e("./buttonFactoryText"),r=e("./userLogin"),o=e("./userCreate"),c=s(),d=n("text","userDisplayName","login__input","Full name"),l=n("text","userEmail","login__input","you@example.com"),i=n("password","userPass","login__input","password"),u=a("signup__button","Create account",o),p=document.createElement("p");return p.textContent="Or, sign in to existing account",p.classList.add("login__button"),p.addEventListener("click",r),t.classList.add("login__content"),t.appendChild(c),t.appendChild(d),t.appendChild(l),t.appendChild(i),t.appendChild(u),t.appendChild(p),t},s=()=>{const e=document.createElement("span"),t=document.createElement("h1"),n=document.createElement("p");return t.textContent="Sign in to slack",n.textContent="Get started collaborating with your teammates.",e.classList.add("login__title"),e.appendChild(t),e.appendChild(n),e}},{"./buttonFactoryText":4,"./inputFactory":20,"./userCreate":38,"./userLogin":39}],25:[function(e,t,n){document.querySelector("#uploadFile").addEventListener("click",()=>{let e=new FileReader,t=document.querySelector("input[type=file]").files[0];e.addEventListener("load",function(){preview.src=e.result},!1),t&&e.readAsDataURL(t)})},{}],26:[function(e,t,n){const a=(e,t)=>{const n=document.createElement("span");n.classList.add("message__title");const a=document.createElement("p");a.textContent=t;const s=document.createElement("p");return s.textContent=e,a.classList.add("message__title--user"),s.classList.add("message__title--date"),n.appendChild(a),n.appendChild(s),n},s=()=>{const e=document.createElement("img");return e.src="img/avatar.png",e.classList.add("messages__avatar"),e};t.exports=((e,t)=>{const n=document.createElement("span"),r=document.createElement("span");r.classList.add("message__right");const o=a(e,t.user.email),c=s();n.classList.add("message");const d=document.createElement("p");return d.classList.add("message__body"),d.textContent=t.text,r.appendChild(o),r.appendChild(d),n.appendChild(c),n.appendChild(r),n})},{}],27:[function(e,t,n){t.exports=(()=>{const e=document.createElement("span");e.setAttribute("id","channelModal");const t=a(),n=document.querySelector("body");e.classList.add("createChannel"),e.appendChild(t),n.appendChild(e)});const a=()=>{const t=document.createElement("span"),n=e("./inputFactory"),a=e("./buttonFactoryText"),r=e("./inputLabelFactory"),o=(e("./databaseCreate"),e("./createNewChannel").createNewChannel),c=e("./createNewChannel").closeCreateNewModal;t.classList.add("createChannel__content");const d=s(),l=r("Name"),i=r("Purpose"),u=n("text","nameInput","createChannel__content--input","e.g. marketing"),p=n("text","purposeInput","createChannel__content--input","Enter channel purpose.."),h=document.createElement("span");h.classList.add("createChannel__content--actions");const m=a("createChannel__content--cancel","Cancel",c),C=a("createChannel__content--create","Create channel",o);return h.appendChild(m),h.appendChild(C),t.appendChild(d),t.appendChild(l),t.appendChild(u),t.appendChild(i),t.appendChild(p),t.appendChild(h),t},s=()=>{const e=document.createElement("span"),t=document.createElement("h1"),n=document.createElement("p");return t.textContent="Create new channel",n.textContent="Channels are where your members communicate. They’re best when organized around a topic — #leads, for example.",e.classList.add("createChannel__title"),e.appendChild(t),e.appendChild(n),e}},{"./buttonFactoryText":4,"./createNewChannel":9,"./databaseCreate":12,"./inputFactory":20,"./inputLabelFactory":21}],28:[function(e,t,n){t.exports=(t=>{const n=e("./dateGenerator"),a=document.querySelector(".messages"),s=e("./databaseAddMessage").addMessageToChannel,r=e("./messageFactory"),o=e("./databaseAddMessage").addMessage,c=n(),d={channel:"-LBN5_skx51L7hJQp5R1",user:t,date:c,text:"joined #watercooler",media:""},l=r(c,d);a.appendChild(l),s(d),o(d)})},{"./databaseAddMessage":11,"./dateGenerator":18,"./messageFactory":26}],29:[function(e,t,n){document.querySelector("#writeMessage").addEventListener("keypress",t=>{13===(t.which||t.keyCode)&&(()=>{const t=e("./userCheck").getCurrentUser,n=e("./channelCheck").getCurrentChannel,a=e("./messageFactory"),s=e("./clearInputs"),r=e("./databaseAddMessage").addMessageToChannel,o=e("./databaseAddMessage").addMessage,c=e("./keepMessagesBottom"),d=e("./dateGenerator"),l=document.querySelector("#writeMessage").value,i=document.querySelector(".messages"),u=t(),p=(u.uid,n()),h=d(),m={channel:p.id,user:u,date:h,text:l,media:""},C=a(h,m);i.appendChild(C),s("writeMessage"),r(m),o(m),c()})()})},{"./channelCheck":6,"./clearInputs":8,"./databaseAddMessage":11,"./dateGenerator":18,"./keepMessagesBottom":22,"./messageFactory":26,"./userCheck":37}],30:[function(e,t,n){t.exports=(t=>{const n=e("./messageFactory"),a=document.querySelector(".messages");t.forEach(e=>{const t=e.date,s=n(t,e);a.appendChild(s)}),a.scrollTop=9999})},{"./messageFactory":26}],31:[function(e,t,n){},{"./channelCheck":6,"./userCheck":37}],32:[function(e,t,n){const a=()=>{const t=e("./buttonFactoryIcon"),n=e("./newChannelModal"),a=document.createElement("span");a.classList="sidebar__channels--header";const s=document.createElement("h2");s.textContent="Channels";const r=t("sidebar__channels--new",'<i class="material-icons add-channel">add_circle_outline</i>',n);return a.appendChild(s),a.appendChild(r),a};t.exports=(t=>{const n=document.createElement("span");n.setAttribute("id","channelList");const s=document.createElement("span"),r=e("./sidebarUsers"),o=e("./sidebarStructure"),c=e("./changeChannel"),d=a();t.forEach(e=>{const t=document.createElement("span");t.setAttribute("id",e.key),t.setAttribute("data-purpose",e.purpose),t.addEventListener("click",c),t.classList="individual-channel";const n=document.createElement("img");n.src="img/hash.png";const a=document.createElement("a");a.textContent=e.name,t.appendChild(n),t.appendChild(a),s.appendChild(t)}),s.classList="sidebar__channels--list",n.appendChild(d),n.appendChild(s),o(n),r(t)})},{"./buttonFactoryIcon":3,"./changeChannel":5,"./newChannelModal":27,"./sidebarStructure":35,"./sidebarUsers":36}],33:[function(e,t,n){const a=e=>{const t=document.querySelector("#accountOptions"),n=document.querySelector("#dropdownBackground"),a=document.querySelector("body");a.removeChild(t),a.removeChild(n)};t.exports=(t=>{const n=document.querySelector("body"),s=document.createElement("span");s.setAttribute("id","dropdownBackground"),s.classList.add("sidebar__dropdown--background"),s.addEventListener("click",a);const r=document.createElement("span");r.setAttribute("id","accountOptions"),r.classList.add("sidebar__dropdown");const o=(()=>{const t=document.createElement("span"),n=e("./userCheck").getCurrentUser,a=document.createElement("h2");a.textContent=n().email,a.classList="sidebar__dropdown--user";const s=document.createElement("span");return s.classList.add("sidebar__dropdown--optionList"),["Profile & account","Preferences","Sign out"].forEach(t=>{const n=document.createElement("p");if(n.textContent=t,n.classList="sidebar__dropdown--option","Sign out"===t){const t=e("./userLogout");n.addEventListener("click",t)}s.appendChild(n)}),t.appendChild(a),t.appendChild(s),t})();n.appendChild(s),r.appendChild(o),n.appendChild(r)})},{"./userCheck":37,"./userLogout":40}],34:[function(e,t,n){const a=e=>{const t=document.createElement("span");t.classList="sidebar__header--content",t.setAttribute("id","sidebarHeader");const n=document.createElement("p");n.textContent=e.email,n.classList="sidebar__header--name",n.setAttribute("id","sidebarHeader");const a=document.createElement("span");return a.classList="sidebar__header--icon",a.setAttribute("id","sidebarHeader"),a.innerHTML='<i class="material-icons drop" id="sidebarHeader">keyboard_arrow_down</i>',t.appendChild(n),t.appendChild(a),t};t.exports=(t=>{const n=e("./sidebarDropdown"),s=(e("./userLogout"),document.querySelector("#sidebar")),r=document.createElement("span");r.classList="sidebar__header",r.setAttribute("id","sidebarHeader"),r.addEventListener("click",n);const o=a(t);r.appendChild(o),s.insertBefore(r,s.firstChild)})},{"./sidebarDropdown":33,"./userLogout":40}],35:[function(e,t,n){t.exports=(t=>{const n=document.querySelector(".sidebar");e("./sidebarChannels"),e("./userLogout");n.appendChild(t)})},{"./sidebarChannels":32,"./userLogout":40}],36:[function(e,t,n){const a=()=>{const e=document.createElement("span");e.classList="sidebar__channels--header";const t=document.createElement("h2");return t.textContent="Direct Messages",e.appendChild(t),e};t.exports=(t=>{const n=document.createElement("span");n.setAttribute("id","userList");const s=document.createElement("span"),r=(e("./sidebarStructure"),e("./changeChannel"),e("./directMessageUser")),o=document.querySelector("#sidebar"),c=a(),d=t[0].users;let l=[];for(let e in d)l.push(d[e]);l.forEach(e=>{const t=document.createElement("span");t.setAttribute("id",e.id),t.addEventListener("click",r),t.classList="individual-user";const n=document.createElement("img");n.src="img/online.png";const a=document.createElement("a");a.textContent=e.email,t.appendChild(n),t.appendChild(a),s.appendChild(t)}),s.classList="sidebar__users--list",n.appendChild(c),n.appendChild(s),o.appendChild(n)})},{"./changeChannel":5,"./directMessageUser":19,"./sidebarStructure":35}],37:[function(e,t,n){let a=null;firebase.auth().onAuthStateChanged(t=>{if(t){a=t;const n=e("./sidebarHead");document.querySelector("#loginModal").classList.add("hide"),n(a)}else loginModal.classList.remove("hide"),console.log("User does not exist")});t.exports={getCurrentUser:()=>a,setCurrentUser:e=>{a=e}}},{"./sidebarHead":34}],38:[function(e,t,n){t.exports=(()=>{const t=e("./addToChannel"),n=e("./userCheck").setCurrentUser,a=e("./clearInputs"),s=e("./newUserAddedToChannel"),r=document.querySelector("#userEmail").value,o=(document.querySelector("#userDisplayName").value,document.querySelector("#userPass").value),c=firebase.auth();a("userEmail"),a("userPass"),a("userDisplayName"),c.createUserWithEmailAndPassword(r,o).then(e=>{n(e),t(e),s(e)}).catch(e=>console.log(e.message))})},{"./addToChannel":1,"./clearInputs":8,"./newUserAddedToChannel":28,"./userCheck":37}],39:[function(e,t,n){t.exports=(()=>{const t=e("./clearInputs"),n=document.querySelector("#userEmail").value,a=document.querySelector("#userPass").value,s=firebase.auth();t("userEmail"),t("userPass"),t("userDisplayName"),s.signInWithEmailAndPassword(n,a).catch(e=>console.log(e.message))})},{"./clearInputs":8}],40:[function(e,t,n){t.exports=(()=>{const e=document.querySelector("#sidebar"),t=document.querySelector("#sidebarHeader"),n=document.querySelector("#accountOptions"),a=document.querySelector("#dropdownBackground"),s=document.querySelector("body");e.removeChild(t),s.removeChild(n),s.removeChild(a),firebase.auth().signOut()})},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40]);